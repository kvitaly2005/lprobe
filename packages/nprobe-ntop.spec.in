Summary: network probe
Name: lprobe
Version: @PACKAGE_VERSION@
Release: 0
License: GPL
Group: Networking/Utilities
URL: http://www.ntop.org/lprobe.html
Source: lprobe-%{version}.tgz
Packager: Fernanda Weiden <nanda@google.com>
# Temporary location where the RPM will be built
BuildRoot:  %{_tmppath}/%{name}-%{version}-root
Requires: libpcap >= 0.8.3 glibc >= 2.3.4 @GEOIP_DEP@

%description
lprobe is a software NetFlow v5/v9/IPFIX and nFlow probe that allows to turn 
a PC into a NetFlow probe. It has been designed to be compact, easy to 
embed, an memory/CPU savvy.

%prep

%setup -q

%build
PATH=/usr/bin:/bin:/usr/sbin:/sbin

if [ -x ./configure ]; then
  CFLAGS="$RPM_OPT_FLAGS" ./configure 
else
  CFLAGS="$RPM_OPT_FLAGS" ./autogen.sh 
fi
make
#
cd $RPM_BUILD_DIR/%{name}-%{version}/utils
make

# Installation may be a matter of running an install make target or you
# may need to manually install files with the install command.
%install
PATH=/usr/bin:/bin:/usr/sbin:/sbin
make DESTDIR=$RPM_BUILD_ROOT install 
#
DST=$RPM_BUILD_ROOT/usr/local/lprobe
SRC=$RPM_BUILD_DIR/%{name}-%{version}
mkdir -p $DST/python
cp $SRC/python/lprobeStats.py $DST/python
cp -r $SRC/html $DST
cp $SRC/utils/nf_reflector $RPM_BUILD_ROOT/usr/local/bin/
# Clean out our build directory
%clean
rm -fr $RPM_BUILD_ROOT

%files
/usr/local/bin/lprobe
/usr/local/lib/liblprobe-@PACKAGE_VERSION@.so
/usr/local/lib/liblprobe.a
/usr/local/lib/liblprobe.la
/usr/local/lib/liblprobe.so
#/usr/local/lib/lprobe/plugins/librtpPlugin-@PACKAGE_VERSION@.so
#/usr/local/lib/lprobe/plugins/librtpPlugin.a
#/usr/local/lib/lprobe/plugins/librtpPlugin.la
#/usr/local/lib/lprobe/plugins/librtpPlugin.so
#/usr/local/lib/lprobe/plugins/libsipPlugin-@PACKAGE_VERSION@.so
#/usr/local/lib/lprobe/plugins/libsipPlugin.a
#/usr/local/lib/lprobe/plugins/libsipPlugin.la
#/usr/local/lib/lprobe/plugins/libsipPlugin.so
#/usr/local/lib/lprobe/plugins/libdbPlugin-@PACKAGE_VERSION@.so
#/usr/local/lib/lprobe/plugins/libdbPlugin.a
#/usr/local/lib/lprobe/plugins/libdbPlugin.la
#/usr/local/lib/lprobe/plugins/libdbPlugin.so
#/usr/local/lib/lprobe/plugins/libsmtpPlugin-@PACKAGE_VERSION@.so
#/usr/local/lib/lprobe/plugins/libsmtpPlugin.a
#/usr/local/lib/lprobe/plugins/libsmtpPlugin.la
#/usr/local/lib/lprobe/plugins/libsmtpPlugin.so
#/usr/local/lib/lprobe/plugins/libdumpPlugin-@PACKAGE_VERSION@.so
#/usr/local/lib/lprobe/plugins/libdumpPlugin.a
#/usr/local/lib/lprobe/plugins/libdumpPlugin.la
#/usr/local/lib/lprobe/plugins/libdumpPlugin.so
#/usr/local/lib/lprobe/plugins/libhttpPlugin-@PACKAGE_VERSION@.so
#/usr/local/lib/lprobe/plugins/libhttpPlugin.a
#/usr/local/lib/lprobe/plugins/libhttpPlugin.la
#/usr/local/lib/lprobe/plugins/libhttpPlugin.so
#/usr/local/lib/lprobe/plugins/libl7Plugin-@PACKAGE_VERSION@.so
#/usr/local/lib/lprobe/plugins/libl7Plugin.a
#/usr/local/lib/lprobe/plugins/libl7Plugin.la
#/usr/local/lib/lprobe/plugins/libl7Plugin.so
#/usr/local/lib/lprobe/plugins/libmysqlPlugin-@PACKAGE_VERSION@.so
#/usr/local/lib/lprobe/plugins/libmysqlPlugin.a
#/usr/local/lib/lprobe/plugins/libmysqlPlugin.la
#/usr/local/lib/lprobe/plugins/libmysqlPlugin.so
#
/usr/local/lib/lprobe/plugins/libntopPlugin-@PACKAGE_VERSION@.so
/usr/local/lib/lprobe/plugins/libntopPlugin.la
/usr/local/lib/lprobe/plugins/libntopPlugin.so
/usr/local/lib/lprobe/plugins/libntopPlugin.a
/usr/local/lprobe/html
/usr/local/lprobe/python
/usr/local/bin/nf_reflector




# Set the default attributes of all of the files specified to have an
# owner and group of root and to inherit the permissions of the file
# itself.
%defattr(-, root, root)

%changelog
* Fri Jan 27 2006 Fernanda Weiden <nanda@google.com> 4.0
- Original upstream version


